# Deskoration

![Deskoration_mockup](https://github.com/FRONTENDSCHOOL7/final-14-Deskoration/assets/130200440/ccf8e5c3-fc98-425c-ac94-e6e5decc3cc0)

사람들은 일을 하기 위해, 공부를 하기 위해, 게임을 하기 위해 등등 다양한 이유로 침대보다 책상에서 더 오랜 시간을 보냅니다. 저희 데스코레이션은 오랜 시간을 책상에서 보내야 하는 여러분의 시간을 단조로움이 아닌 새로움으로 채우고자 시작했습니다.
저희 프로젝트는 데스크테리어 SNS로 사용자들은 나만의 데스크셋업을 업로드하고, 소통할 수 있습니다. 사용자들은 본인만의 데스크테리어와 실제 사용감을 공유함으로써 단순한 공간 변화를 넘어, 나만의 소중한 공간을 꾸며나갈 수 있습니다.

## 배포 링크 및 테스트 계정

👉 [Deskoration 시작하기](https://deskoration.netlify.app/)

```
ID : test@deskoration.com
PW : test123
```

## 팀원

## 팀원

|                                                                     이예진                                                                      |                                                                        문정민                                                                         |                                                                        우준하                                                                         |                                                                     최현진                                                                      |
| :---------------------------------------------------------------------------------------------------------------------------------------------: | :---------------------------------------------------------------------------------------------------------------------------------------------------: | :---------------------------------------------------------------------------------------------------------------------------------------------------: | :---------------------------------------------------------------------------------------------------------------------------------------------: |
|            ![예니](https://github.com/FRONTENDSCHOOL7/final-14-Deskoration/assets/108519185/2106ba6a-e625-4f5b-be7f-9829bc2acde5)             |              ![정민](https://github.com/FRONTENDSCHOOL7/final-14-Deskoration/assets/108519185/dcd37cdc-375c-43bc-a420-dc609ee9aa4a)               |               ![준하](https://github.com/FRONTENDSCHOOL7/final-14-Deskoration/assets/108519185/9030e323-defa-4b38-8bd3-0fe3a34c8ce8)               |           ![현진](https://github.com/FRONTENDSCHOOL7/final-14-Deskoration/assets/108519185/d60c8a3d-7271-4b9c-ac4d-6144ff04494a)            |
|                                                                      리더                                                                       |                                                                        디자인                                                                         |                                                                         기록                                                                          |                                                                       API                                                                       |
| <a href="https://github.com/YennieJ"><img src="https://img.shields.io/badge/YennieJ-181717?style=flat-square&logo=github&logoColor=white"/></a> | <a href="https://github.com/jungmin801"><img src="https://img.shields.io/badge/jungmin801-181717?style=flat-square&logo=github&logoColor=white"/></a> | <a href="https://github.com/wooluck210"><img src="https://img.shields.io/badge/wooluck210-181717?style=flat-square&logo=github&logoColor=white"/></a> | <a href="https://github.com/Herrypi"><img src="https://img.shields.io/badge/Herrypi-181717?style=flat-square&logo=github&logoColor=white"/></a> |

## 📚 Stacks

### Development

![React](https://img.shields.io/badge/React-20232A?style=for-the-badge&logo=react&logoColor=61DAFB)
![React-router](https://img.shields.io/badge/React_Router-CA4245?style=for-the-badge&logo=react-router&logoColor=white)
![React-query](https://img.shields.io/badge/React_query-FF4154?style=for-the-badge&logo=React-query&logoColor=white)
![React-hook-form](https://img.shields.io/badge/React_hook_form-EC5990?style=for-the-badge&logo=React-hook-form&logoColor=61DAFB)
![Redux-toolkit](https://img.shields.io/badge/Redux_tookit-593D88?style=for-the-badge&logo=redux&logoColor=white)
![styled-components](https://img.shields.io/badge/styled--components-DB7093?style=for-the-badge&logo=styled-components&logoColor=white)
![Axios](https://img.shields.io/badge/Axios-20232A?style=for-the-badge&logo=Axios&logoColor=61DAFB)
![Firebase](https://img.shields.io/badge/Firebase-FFCA28?style=for-the-badge&logo=Firebase&logoColor=61DAFB)

### Communication

![discord](https://img.shields.io/badge/Discord-7289DA?style=for-the-badge&logo=discord&logoColor=white)
![google-sheets](https://img.shields.io/badge/Google%20Sheets-34A853?style=for-the-badge&logo=google-sheets&logoColor=white)
![figma](https://img.shields.io/badge/Figma-F24E1E?style=for-the-badge&logo=figma&logoColor=white)

### 사용한 라이브러리

| 라이브러리            | 이유                                                                                                                                                                                                                             |
| --------------------- | -------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| **React Query**       | React-Query는 React componenet 내부에서 간단하고 직관적으로 API를 사용하여 비교적 코드 양이 적고 구조가 단순해 유지 보수에 용이하여 사용했습니다.                                                                                |
| **React Hook Form**   | Ref 기반의 접근 방식으로 불필요한 렌더링을 최소화하고, 유효성 검사 및 에러 핸들링을 포함한 효율적인 폼 관리를 위해 사용했습니다.                                                                                                 |
| **Axios**             | JSON 데이터 파싱 및 문자열 변환과 함께 인터셉터를 활용하여 공통 설정을 효과적으로 관리하여 코드의 일관성과 유지보수성을 높이기 위해 사용했습니다.                                                                                |
| **Styled-Components** | 각 컴포넌트의 스타일링 독립성을 보장하고, 테마 적용 및 동적 스타일링을 용이하게 하기 위해 사용했습니다.                                                                                                                          |
| **FireStore**         | 채팅방 생성과 데이터가 많이 쌓이지 않는 가벼운 실시간 채팅을 필요로 했고, 프로젝트 스케줄과 우선순위 상 채팅에 많은 에너지와 시간을 쏟을 수 없는 상황이였기 때문에 시간이 많이 필요한 웹소켓 보다는 파이어스토어를 사용했습니다. |

## 컨벤션 및 회의록

👉 [컨벤션 및 회의록 확인하러 가기](https://docs.google.com/spreadsheets/d/1Kx798dgNPpFuM2BJgcgHvlGeeD8QALAMxrKqWyp37XA/edit#gid=1219433492)

## Git branch 전략

![브랜치전략](https://github.com/FRONTENDSCHOOL7/final-14-Deskoration/assets/54842493/e98a8c8d-e950-43d4-b5f7-951924679a8a)

## 파일 구조

```
src
 ┣ assets
 ┃ ┣ fonts
 ┃ ┗ images
 ┣ components
 ┃ ┣ Auth
 ┃ ┃ ┣ Splash
 ┃ ┃ ┣ Login.jsx
 ┃ ┃ ┗ Signup.jsx
 ┃ ┣ common
 ┃ ┃ ┣ AlertModal
 ┃ ┃ ┣ BottomSheet
 ┃ ┃ ┣ ConfirmModal
 ┃ ┃ ┣ GradientButton
 ┃ ┃ ┣ Input
 ┃ ┃ ┣ Loading
 ┃ ┃ ┗ NoContents
 ┃ ┣ Footer
 ┃ ┣ Header
 ┃ ┣ Home
 ┃ ┃ ┣ Content
 ┃ ┃ ┗ Slide
 ┃ ┣ Like
 ┃ ┃ ┣ SocialButton
 ┃ ┃ ┗ Like.jsx
 ┃ ┣ Post
 ┃ ┃ ┣ Marker
 ┃ ┃ ┣ PostDetail
 ┃ ┃ ┃ ┣ Comment
 ┃ ┃ ┃ ┗ DetailPost
 ┃ ┃ ┣ PostUpload
 ┃ ┃ ┃ ┣ PostRegister
 ┃ ┃ ┃ ┗ ProductRegister
 ┃ ┃ ┗ Tooltip
 ┃ ┗ Profile
 ┃ ┃ ┗ ProfileFollow
 ┣ features
 ┃ ┣ modal
 ┃ ┃ ┣ alertModalSlice.js
 ┃ ┃ ┗ confirmModalSlice.js
 ┃ ┗ pageTitle
 ┃ ┃ ┗ pageTitleSlice.js
 ┣ hooks
 ┃ ┣ useImgUpload.js
 ┃ ┣ useLikeUpdate.js
 ┃ ┣ useNavigate.js
 ┃ ┣ usePageHandler.js
 ┃ ┣ useQueryData.jsx
 ┃ ┗ useScroll.js
 ┣ Layout
 ┃ ┣ DefaultLayout.jsx
 ┃ ┣ LayoutStyle.styled.jsx
 ┃ ┗ NoFooterLayout.jsx
 ┣ pages
 ┃ ┣ 404
 ┃ ┣ AuthPage
 ┃ ┣ ChatPage
 ┃ ┃ ┣ ChatListPage
 ┃ ┃ ┗ ChatRoomPage
 ┃ ┣ FeedPage
 ┃ ┣ FollowPage
 ┃ ┣ HomePage
 ┃ ┃ ┗ HomePage.jsx
 ┃ ┣ PostPage
 ┃ ┃ ┣ AddPostPage
 ┃ ┃ ┗ DetailPostPage
 ┃ ┣ ProductPage
 ┃ ┣ ProfilePage
 ┃ ┗ ProfileUploadPage
 ┣ router
 ┃ ┣ PrivateRoute.jsx
 ┃ ┣ PublicRoute.jsx
 ┃ ┗ Router.jsx
 ┣ service
 ┃ ┣ auth_service.js
 ┃ ┣ axiosInstance.js
 ┃ ┣ comment_service.js
 ┃ ┣ follow_service.js
 ┃ ┣ img_service.js
 ┃ ┣ kakaoMap_service.js
 ┃ ┣ like_service.js
 ┃ ┣ post_service.js
 ┃ ┗ profile_service.js
 ┣ styles
 ┃ ┣ GlobalStyle.js
 ┃ ┗ theme.js
 ┣ .editorconfig
 ┣ .prettierrc
 ┣ App.css
 ┣ App.js
 ┣ firebase.js
 ┣ index.js
 ┗ store.js
```

## 주요 기능 소개

### 1. 홈

|                                                          시작 화면                                                           |                                                           회원가입                                                           |                                                           프로필 설정                                                           |                                                           로그인                                                           |
| :--------------------------------------------------------------------------------------------------------------------------: | :--------------------------------------------------------------------------------------------------------------------------: | :-----------------------------------------------------------------------------------------------------------------------------: | :------------------------------------------------------------------------------------------------------------------------: |
| ![1  시작화면](https://github.com/FRONTENDSCHOOL7/final-14-Deskoration/assets/54842493/ccd0962b-7049-43e1-9b47-e4693b5359f2) | ![2  회원가입](https://github.com/FRONTENDSCHOOL7/final-14-Deskoration/assets/54842493/d8427fdf-e517-4ec6-9f8a-6a0034a2d796) | ![3  프로필 설정](https://github.com/FRONTENDSCHOOL7/final-14-Deskoration/assets/54842493/5476073b-5bb1-4dc1-a344-de3a0b3a3129) | ![4  로그인](https://github.com/FRONTENDSCHOOL7/final-14-Deskoration/assets/54842493/8671f324-e151-45cf-bced-39e35d7603f7) |

### 2. 게시글

|                                                           홈페이지                                                           |                                                          피드 페이지                                                           |                                                           게시글 등록                                                           |                                                           게시글 상세보기                                                           |
| :--------------------------------------------------------------------------------------------------------------------------: | :----------------------------------------------------------------------------------------------------------------------------: | :-----------------------------------------------------------------------------------------------------------------------------: | :---------------------------------------------------------------------------------------------------------------------------------: |
| ![5  홈페이지](https://github.com/FRONTENDSCHOOL7/final-14-Deskoration/assets/54842493/9dd39fbd-42d9-4c45-9bfc-053336b81699) | ![6  피드페이지](https://github.com/FRONTENDSCHOOL7/final-14-Deskoration/assets/54842493/4b26aea2-3a3b-4492-b9c8-bce4f6d8a3e3) | ![7  게시글 등록](https://github.com/FRONTENDSCHOOL7/final-14-Deskoration/assets/54842493/95c03275-fbf4-4e3e-9fb4-a6b8f47c38c9) | ![8  게시글 상세보기](https://github.com/FRONTENDSCHOOL7/final-14-Deskoration/assets/54842493/e5810421-426c-4d91-a4fd-812d85ed2e5f) |

|                                                            게시글 수정                                                            |                                                            게시글 삭제                                                            |                                                           게시글 신고하기                                                            |
| :-------------------------------------------------------------------------------------------------------------------------------: | :-------------------------------------------------------------------------------------------------------------------------------: | :----------------------------------------------------------------------------------------------------------------------------------: |
| ![9-2  게시글 수정](https://github.com/FRONTENDSCHOOL7/final-14-Deskoration/assets/54842493/dccb04ea-0ae2-4371-b402-7bb2db5b5f26) | ![9-1  게시글 삭제](https://github.com/FRONTENDSCHOOL7/final-14-Deskoration/assets/54842493/af5ff0cb-89bf-492f-a132-3e9023646269) | ![10  게시글 신고하기](https://github.com/FRONTENDSCHOOL7/final-14-Deskoration/assets/54842493/0da28bba-815f-414d-b184-89eaaf7166b7) |

### 3. 프로필

|                                                            프로필 수정                                                             |                                                            팔로우                                                             |                                                            로그아웃                                                             |
| :--------------------------------------------------------------------------------------------------------------------------------: | :---------------------------------------------------------------------------------------------------------------------------: | :-----------------------------------------------------------------------------------------------------------------------------: |
| ![12-1  프로필 수정](https://github.com/FRONTENDSCHOOL7/final-14-Deskoration/assets/54842493/6c3ff379-a493-4066-8db0-701e681fada8) | ![13-1  팔로우](https://github.com/FRONTENDSCHOOL7/final-14-Deskoration/assets/54842493/16198277-72c1-4154-9e50-6b731e2fd930) | ![14-1  로그아웃](https://github.com/FRONTENDSCHOOL7/final-14-Deskoration/assets/54842493/c21e3330-b3a0-4f73-91ae-c34304393078) |

### 4. 좋아요, 댓글, 채팅

|                                                           좋아요, 댓글                                                            |                                                           채팅                                                            |
| :-------------------------------------------------------------------------------------------------------------------------------: | :-----------------------------------------------------------------------------------------------------------------------: |
| ![15  좋아요, 댓글](https://github.com/FRONTENDSCHOOL7/final-14-Deskoration/assets/54842493/b25fdd53-3f2e-41ac-b7d7-016596d4eac2) | ![16  채팅](https://github.com/FRONTENDSCHOOL7/final-14-Deskoration/assets/54842493/dfe840e4-4dbb-4965-8b35-ee46eae8cbd2) |

## 핵심 코드

### 마커

**이미지 위에 등록한 마커를 이동하기**:

`onMouseMove`함수는 마커를 드래그할 때마다 마커의 위치를 동적으로 업데이트하는 함수입니다. 마커의 위치는 이미지 컨테이너의 크기에 맞춰 백분율로 계산됩니다. 이때, 마커가 컨테이너의 경계를 벗어나지 않도록 이동 범위를 제한합니다.

```javascript
// 요소가 움직일 수 있는 최대 한계를 계산한다.
// 마커가 컨테이너의 오른쪽 혹은 아래쪽의 경계를 넘지 않도록 한다.
const calcEndPoint = (containerSize, markerSize) => {
  return parseFloat(
    ((containerSize - markerSize + markerPadding) / containerSize) * 100
  );
};

// 컨테이너 내에서 마커의 새 위치를 계산한다.
// 마커가 컨테이너의 왼쪽 혹은 위쪽의 경계를 넘지 않도록 한다.
const calcMarkerPosition = (position, containerSize) => {
  return parseFloat((Math.max(-markerPadding, position) / containerSize) * 100);
};

// 드래그 동작 중 마커의 실제 움직임을 처리한다.
// 마커가 컨테이너의 경계를 넘지 않도록 제한한다.
const calcNewMarkerPosition = (event) => {
  const diffX = event.clientX - originPosition.clientX;
  const diffY = event.clientY - originPosition.clientY;
  const endPointX = calcEndPoint(containerSize.width, markerSize.width);
  const endPointY = calcEndPoint(containerSize.height, markerSize.height);

  const newLeft = calcMarkerPosition(
    originPosition.left + diffX,
    containerSize.width
  );
  const newTop = calcMarkerPosition(
    originPosition.top + diffY,
    containerSize.height
  );

  return {
    x: Math.min(newLeft, endPointX),
    y: Math.min(newTop, endPointY),
  };
};

// 드래그 함수
// 새로 계산한 마커의 위치를 productItems 상태에 업데이트합니다.
const onMouseMove = (event) => {
  if (isDragging) {
    const newMarkerPostion = calcNewMarkerPosition(event);

    if (selectedMarkerIndex !== null) {
      const updatedProductItems = [...productItems];
      updatedProductItems[selectedMarkerIndex].marker = newMarkerPostion;
      setProductItems(updatedProductItems);
    }
  }
};
```

### 커스텀 훅

**React-query를 이용하여 API를 호출하는 커스텀 훅**:

기존에는 `then`, `catch`를 이용하여 API를 호출하여 데이터를 요청하고, 수정했습니다. 코드가 길어져서 읽기에 어려운 코드 양을 줄이고, 무한 스크롤 기능을 위한 다음 페이지의 데이터를 호출하는 `fetchNextPage`를 사용하기 위해 React-Query를 사용했습니다. 또한, 자주 반복되고 사용되는 React-query로 API를 호출하는 부분을 커스텀 훅으로 만들어서 사용하여 코드의 반복성을 줄이고 가독성을 높였습니다.

```javascript
// useQuery 커스텀 훅
export const useFeedQueryData = () => {
  const { data, isLoading, error } = useQuery({
    queryKey: ["getFeed"],
    queryFn: () => getFeedAPI(),
    select: (responseData) =>
      responseData.posts.map((post) => {
        const content = JSON.parse(post.content);
        const createdAt = {
          year: new Date(post.createdAt).getFullYear(),
          month: new Date(post.createdAt).getMonth() + 1,
          date: new Date(post.createdAt).getDate(),
        };
        return { ...post, content: content, createdAt: createdAt };
      }),
  });
  return { data, isLoading, error };
};

// API 호출 커스텀
export const getFeedAPI = async () => {
  const reqURL = `/post/feed`;

  try {
    const response = await instance.get(reqURL);

    return response.data;
  } catch (error) {
    throw new Error("피드 게시글을 가져올 수 없습니다.");
  }
};
```

### 채팅

**FireStore를 이용한 유저간의 실시간 채팅**:

실시간 채팅 기능에서 제일 중요한 것은 실시간(RealTime)인데 이 부분은 `useQueary` 와 `useMutation` 보다 훨씬 속도가 빠른 `onSnapshot`함수를 통해 실시간으로 데이터를 가져오고, `updatedoc`을 통해 실시간으로 데이터를 업데이트 되도 했습니다.

```javascript
// 실시간으로 채팅 가져오기
useEffect(() => {
  // 데이터를 가져오는 함수 호출
  fetchData();

  // 채팅 컬렉션에 대한 실시간 업데이트를 구독하고, 구독 해제 함수를 언마운트 시에 실행
  const unsubscribe = onSnapshot(chatCollectionRef, (snapshot) => {
    // 스냅샷의 변경 내용을 순회하면서 처리
    snapshot.docChanges().forEach((change) => {
      // 변경 유형이 'modified' 또는 'added'인 경우에만 처리
      if (change.type === "modified" || change.type === "added") {
        // 변경된 문서의 roomId가 현재 roomId와 일치하는 경우에만 메시지 업데이트
        if (change.doc.data().roomId === roomId)
          setChatMessages(change.doc.data().messages);
      }
    });
  });

  // 언마운트 시에 구독을 해제하여 메모리 누수 방지
  return () => unsubscribe();
}, [roomId]);

// 실시간으로 채팅 보내며 업데이트하기
const handleSendMessage = async (data) => {
  // ... (이전 코드)

  try {
    if (roomId !== undefined) {
      // UpdateDoc 을 사용하여 메시지가 저장된 문서에 새 메시지를 추가
      const docRef = doc(db, "messages", chatId);
      await updateDoc(docRef, {
        messages: arrayUnion(newMessage),
      });

      // SetDoc을 사용하여 마지막 메시지 정보가 저장된 문서를 업데이트
      const lastMsgRef = doc(db, "chatList", roomId);
      await setDoc(lastMsgRef, {
        createdAt: new Date(),
        lastMessage: data.chatMsg,
        participants: arrayUnion(participant1, participant2),
      });
    } else {
      // ... (이전 코드)

      // 새로운 채팅 방이 생성되었을 경우, 새로운 방으로 이동
      navigate(`/chat/${newChatList.id}`, {
        state: { roomId: newChatList.id, user: participant1 },
        replace: true,
      });
    }
  } catch (error) {
    // 오류가 발생한 경우 콘솔에 오류 메시지 출력
    console.error("메시지 추가 중 오류 발생: ", error);
  }

  // 'chatMsg' 필드를 재설정하여 메시지 입력 필드를 초기화
  resetField("chatMsg");
};
```

### 이미지 최적화

**react-browser-image-compression 라이브러리를 활용**:

이미지 업로드 시 브라우저에서 동적으로 압축을 수행하여 로딩 속도를 향상시키고, 사용자들이 이동 중에 애플리케이션을 이용할 때 모바일 환경에서 데이터 전송량을 감소시켜 빠른 속도와 부드러운 환경에서 이용하도록 사용자 경험을 개선하고 성능 최적화를 달성함으로써 웹 애플리케이션의 효율성을 높였습니다.

```javascript
// 이미지 최적화를 위한 라이브러리 및 이미지 업로드 API 호출 함수 가져오기
import imageCompression from "browser-image-compression";
import { uploadImgAPI } from "../service/img_service";

// 이미지 업로드 커스텀 훅 정의
export const useImgUpload = (
  setImageFile, // 이미지 파일 상태 업데이트 함수
  setImageURL, // 이미지 URL 상태 업데이트 함수
  setProductItems, // 상품 목록 상태 업데이트 함수
  setIsImageLoaded, // 이미지 로딩 여부 상태 업데이트 함수
  setIsImageAdded // 이미지 추가 여부 상태 업데이트 함수
) => {
  // 이미지 업로드 핸들러 함수 정의
  const handleUploadImg = async (event) => {
    // 지원하는 이미지 확장자 정규식
    const regex = new RegExp(/(.png|.jpg|.jpeg|.gif|.tif|.heic|bmp)/);

    // 업로드한 파일 가져오기
    const file = event.target.files[0];

    // 파일이 없을 경우 중단
    if (!file) return;

    // 이미지 압축 옵션 설정
    const options = {
      maxSizeMB: 5,
    };
    const fileTypeOptions = { ...options, fileType: "image/jpeg" };

    try {
      // 이미지 압축 진행
      const compressedBlob = await imageCompression(
        file,
        regex.test(file) ? options : fileTypeOptions
      );
      // 압축된 파일로 새로운 File 객체 생성
      const compressedFile = new File(
        [compressedBlob],
        regex.test(file)
          ? compressedBlob.name
          : compressedBlob.name.split(".")[0] + ".jpeg",
        {
          type: compressedBlob.type,
        }
      );
      // 이미지를 Base64 형태로 변환하여 업로드 API 호출 및 이미지 상태 업데이트
      const reader = new FileReader();
      reader.readAsDataURL(compressedFile);
      reader.onloadend = () => {
        const imgData = new FormData();
        imgData.append("image", compressedFile);
        uploadImgAPI(imgData, setImageFile);
        setImageURL(reader.result);
      };
      // 기존 상태 초기화 및 로딩 및 추가 여부 업데이트
      setProductItems([]);
      setIsImageLoaded?.(false);
      setIsImageAdded?.(true);
    } catch (error) {
      console.error(error);
    }
  };

  // 이미지 업로드 핸들러 함수 반환
  return handleUploadImg;
};
```

## 트러블 슈팅 및 리팩토링

<details>
<summary>마커 플리커링</summary>
<div markdown="1">

- **문제**: 마커를 드래그앤드롭하여 위치를 이동시킬 때마다 화면이 깜빡이는 플리커링(flickering) 현상이 발생
- **원인**: 마커의 위치를 동적으로 조정하기 위해 styled-components에 position 값을 props로 전달했을 때, 마커가 움직일 때마다 클래스명이 계속 변경되어 DOM 요소가 업데이트되었고, 이로 인해 과도한 DOM 렌더링이 발생
- **해결**: 인라인 스타일을 사용하여 position 값을 업데이트함으로써, 마커의 위치 변경 시 클래스명이 동적으로 변경되는 것을 방지하고 DOM 요소의 스타일 속성만 업데이트. 이러한 방식은 CSSOM을 다시 계산하는 과정을 회피하여 스타일 계산 시간을 절약하고 메모리 사용량을 줄여 플리커링 현상을 해결

</div>
</details>

<details>
<summary>무한 스크롤</summary>
<div markdown="1">

- **문제**: 반응형 웹 구현하는 과정에서 태블릿 화면에서 스크롤이 생성되지 않아, 무한 스크롤 및 데이터 호출이 추가적으로 되지 않음. 또한 scroll 이벤트를 활용한 스크롤은 스크롤을 진행하는 순간마다 이벤트가 호출되어 메인 스레드 성능 저하.
- **원인**: 태블릿 화면은 모바일보다 화면이 커지면서 처음 호출되는 데이터 개수가 화면을 가득 차지 하지 않아 화면에 스크롤 생성이 않음.
- **해결**: Intersection Observer는 브라우저 뷰포트와 원하는 요소의 교차점을 관찰하며, 요소가 뷰포트에 포함되는지 아닌지 구별하는 기능을 제공. 즉, 특정 요소가 사용자 화면에 보이는지 안 보이는지 판단. 그리고 메인 스레드와 별개로 비동기적으로 실행되기 때문에 별도의 최적화가 없더라도 기본적으로 훨씬 빠르게 최적화.

</div>
</details>

<details>
<summary>axios</summary>
<div markdown="1">

- **문제**: API를 호출할 때마다, 해당 API 요청에 필요한 토큰이 웹 브라우저의 session storage에 저장되어 있어야 하지만, 이로 인해 API 호출 코드에서 토큰을 매번 아규먼트로 전달하는 중복이 발생.
- **해결**: 요청을 보내기 전에 호출되는 "요청 인터셉터(interceptor)"를 사용하여 session storage에 저장된 토큰을 확인하고, 있다면 해당 토큰을 요청의 헤더에 추가. 이를 통해 각 API 호출에서 토큰을 명시적으로 전달할 필요 없이 중복을 피할 수 있음.

```javascript
import axios from "axios";

const accessToken = window.sessionStorage.getItem("Token");

const axiosInstance = axios.create({
  baseURL: process.env.REACT_APP_BASE_URL,
  headers: {
    "Content-Type": "application/json",
    Authorization: `Bearer ${accessToken}`,
  },
});

axiosInstance.interceptors.request.use((config) => {
  accessToken && (config.headers.Authorization = `Bearer ${accessToken}`);

  return config;
});

export default axiosInstance;
```

</div>
</details>

<details>
<summary>채팅</summary>
<div markdown="1">

- **문제**: 다른 유저와의 기존 채팅방과 신규 채팅방 구분이 어렵고, 신규 채팅방일 경우 메시지 전송을 해야 채팅방이 생성되는데, 기존 채팅방이 있는 유저도 신규 채팅방 처리가 되어, 동일한 채팅방이 계속 생성되는 문제가 발생.
- **원인**: 유저 정보에 채팅방 정보가 저장되지 않아서, 채팅방 구분이 어려움. 그래서 채팅방마다 해당하는 채팅방에 참여하고 있는 유저의 정보가 필요했고, 채팅방마다 서로 다른 roomid 값으로 구분이 필요.
- **해결**: firestore에 채팅방이 생성되면 room 정보를 따로 저장하여 해당하는 room의 유저들 정보와 roomId를 저장하였고, room 정보에 저장된 roomId와 채팅 메시지 정보에 저장된 roomId와 비교해 해당 룸이 있는지 없는지를 판별하여 채팅방을 생성 여부를 결정. 유저 프로필에서 메시지 보내기를 클릭할 경우 매번 해당 유저와 함께 있는 채팅 방이 있는지 없는지를 비교하게 되어 비용이 발생하겠지만, 다른 방법(ex. 채팅 내역에 room 정보를 넣는 등)들 중에서 가장 비용을 최소화할 수 있는 위와 같은 방법을 선택.

</div>
</details>

## 느낀 점

👑 **예진**

클론 코딩과 개인 프로젝트에서 습득한 지식을 팀원들과 나누면서, 이미 알고 있던 내용을 설명하는 과정에서 더 깊이 공부하게 되었고 기술의 필요성과 적절한 활용 방법에 대한 토론을 진행하며 새로운 관점을 얻는 계기가 되었습니다. 깃허브를 활용한 프론트엔드 협업 경험은 효율적인 코드 관리와 공동 작업의 중요성을 깨닫게 했습니다. 각자의 역할을 잘 수행해주고 궁금한 점에 대해서 적극적으로 소통해준 팀원들이 있었기에 지식의 상호보완과 함께 전문성을 향상시킬 수 있었습니다. 동료들에게 감사를 전하며, 앞으로도 꾸준한 소통으로 서로에게 자극을 주고 함께 성장하는 좋은 동료가 되길 기대합니다. 고생 많았습니다! :)

🐣 **정민**

기술 스택 선정부터 PR을 통한 코드 리뷰까지, 저에게는 많은 것들이 처음이었던 프로젝트였습니다. 프로젝트 초반에는 깃허브를 다루는 데 있어 실수도 많았습니다. 하지만, 그럴 때마다 팀원들과 함께 머리를 맞대고 해결하면서 협업의 중요성을 깊이 깨달았습니다. 팀원 모두가 각자 맡은 부분에 대해 책임감을 가지고 적극적으로 참여하여 리더쉽과 팔로워쉽을 다 잘 발휘했다고 생각합니다. 또한, 다양한 라이브러리를 사용을 해보면서 새로운 기술에 대한 두려움을 극복했으며, 코드 리뷰를 통해 소프트 스킬도 향상시킬 수 있었습니다. 두 달이 넘는 기간 동안 함께 고생한 팀원들에게 진심으로 감사의 마음을 전합니다.

🏞️ **준하**

github를 통한 협업, API 활용, React 프로젝트 등등 모든 것이 처음이어서 기대와 두려움을 모두 가지고 시작했던 프로젝트였습니다. 처음이어서 부족한 부분은 스스로 공부하고, 팀원들에게 물어보면서 팀에 도움이 되기 위해 노력했습니다. 그럼에도 불구하고 저의 부족함이 드러났지만, 그럴 때마다 팀원들에게 물어보고, 팀원들과 함께 문제를 해결함으로써 성장했습니다. 이 과정에서 개발은 혼자 하는 것이 아닌 팀원과 함께 해야 한다는 것을 깨달았고, 시너지를 내기 위해서는 원활한 의사소통을 해야 한다는 것을 깨달았습니다. 앞으로 소통하고 배우며 성장하는 개발자가 되기 위해 노력할 것이고, 저와 함께 해준 팀원들에게 고생이 많았고 감사하다는 말을 전하고 싶습니다.

🧑🏻‍💻 **현진**

이번 프로젝트를 통해서 처음으로 실무와 가까운 경험을 하게 되어서, 개발 경험으로 좋은 기회가 되었습니다. 프로젝트 진행할때 비대면과 대면 모두 해보았는데, 확실히 대면으로 했을 때가 정보공유나 의사소통이 훨씬 원활했던 것을 느끼며 소프트 스킬(협업)의 중요성을 깨달았습니다. 첫 개발이 끝난 이후 프로젝트의 완성도를 위해 팀원들과 리팩토링을 진행하며, 추가적인 기능 추가, 코드를 최소화 하고, 여러가지 라이브러리를 사용하였습니다. 처음 리팩토링이라는 것을 진행 해보고 나서 느낀 것은 개발을 시작하고, 마무리 할 때 배운 것들 보다 마무리 이후 리팩토링을 통해 코드를 깔끔하게 수정하고, 여러가지 라이브러리를 사용하게 되면서 얻어가는 것이 훨씬 많았다고 생각합니다. 앞으로 진행할 프로젝트에서도 더 많은 것들을 배우고 얻어가기 위해 가능한 리팩토링을 진행해야 한다는 생각이 들었습니다.
